---
layout: post
title: Pointers in C/C++
date: 2015-11-09
categories: computer-science
---


Since pointers are about to be covered in my computer science class,
I would make a post about it, both for my own review, and for your reference.
I will not try to make a comprehensive introduction to pointer, but I will make
this post comparison based, so you can see the difference by yourself.

Pointer is a very important and complex feature in C/C++, my post may be incomplete or inaccurate,
please feel free to point it out. 
And because of its complicatedness, I will reference a lot from 
*The C Programming Language*, by Dennis Ritchie, the father of the C language, and Brian Kernighan, 
*Absolute C++*, by Walter Savitch, which is the recommended reading for my class,
and wikipedia, [cplusplus.com](http://www.cplusplus.com/), [cppreference.com](http://en.cppreference.com/w/).

<!--
Most modern programming languages, like Java or Python, have abandoned the use of pointers, 
which when abused, can cause catastrophic consequences. They instead make use of
reference, which makes no difference between the reference itself and the object obtained from dereference.
-->

Pointer is simply something that points to an object. In computer memory, this is
the memory address of the object. In a 64-bit architecture, the size of a pointer
is 8 bytes, and for a 32-bit architecture, it is 4 bytes. The size of the pointer
is irrelevant to the size of the object it points to. You can get the size of pointer
with ```sizeof``` function.

```c++
int *int_ptr;
double *double_ptr;
int int_ptr_size = sizeof(int_ptr), 
    double_ptr_size = sizeof(double_ptr);  // should be size_t, but I will use int for simplicity
std::cout << "size of int_ptr: " << int_ptr_size << std::endl << 
             "size of double_ptr: " << double_ptr_size << std::endl;
std::cout << "the size of a pointer that points to an int and " <<
             "the size of a pointer that points to a double are" <<
             (int_ptr_size == double_ptr_size) ? "the same!" : "different!" 
          << std::endl;
```

The sizeof function (can also be used as a statement) returns the size in bytes of
the object in memory. For example, ```sizeof(int)``` would return 4 
and ```sizeof(double)``` would return 8 on most modern computers. I will talk more
about sizeof function later in the distinction between pointers and arrays.

Pointer is a variable whose value is the address in memory of the object it points to.
We can get the address of a variable with the _addressof_ operator &, and get the value of the
object it points to with the _dereferencing_ operator * . Dereferencing an
uninitialized variable will cause undefined behavior.

```c++
int *ptr;
int int_var = 1;
ptr = &int_var;  // assign the address of int_var to ptr
std::cout << "the value of the object the pointer points to: " 
          << *ptr << std::endl;
std::cout << "the value of the pointer, an address: " 
          << ptr << std::endl;
std::cout << "the address of the pointer stored in memory: " 
          << &ptr << std::endl;
```


### Pointers and Arrays

```c++
char charArray[] = "hello";
```

Initializing a character array with a string literal is just a syntactic sugar, which is equivalent to

```c++
char charArray[] = {'h', 'e', 'l', 'l', 'o', '\0'};
```

Notice the array end with the character '\0', which is the terminator for c strings.

When we try to get the length of the string with strlen function from cstring library,
it will return the length of the character array before the '\0' character.
But when we try to get the length of the character array with ```sizeof(charArray) / sizeof(char)```,
it will return the size of the array represented in memory, which includes the
'\0' character.

```c++
#include <cstring>
std::cout << strlen(charArray) << std::endl;
// prints 5
std::cout << sizeof(charArray) / sizeof(char) << std::endl;
// prints 6
```

But declaring a pointer that points to a character is different.

```c++
const char charPtr* = "hello";
```

A pointer is not the same as an array. You can no longer get the size of the
string literal stored in memory with operator; you can only get the size of the
pointer itself, which is either 4 bytes or 8 bytes depending on your architecture.

```c++
std::cout << strlen(charPtr) << std::endl;
// returns 5, the length of the string
std::cout << sizeof(charPtr) << std::endl;
// returns the size of the pointer in bytes
```

When you pass an array into a function, it will cause the array to pointer decay,
which means 
